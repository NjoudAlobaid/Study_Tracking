<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ù†ØµØ© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„ | Ø¯Ø­ÙˆÙ… ÙˆØ±ÙŠÙ…ÙŠ - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ù…ØµØ­Ø­Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Tajawal:wght@400;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --dahoum-main: #0077b6; 
            --dahoum-grad: linear-gradient(135deg, #0077b6, #00b4d8);
            --remy-main: #6a1b9a; 
            --remy-grad: linear-gradient(135deg, #6a1b9a, #9c27b0);
            --bg: #f8fafc; 
            --gold: #FFD700;
            --success: #4caf50;
            --error: #f44336;
        }
        
        * { 
            box-sizing: border-box; 
            margin: 0; 
            padding: 0; 
        }
        
        body { 
            font-family: 'Cairo', sans-serif; 
            background: var(--bg); 
            transition: 0.3s; 
            padding-bottom: 50px; 
        }
        
        body.dahoum-theme { 
            --active: var(--dahoum-main); 
            --active-grad: var(--dahoum-grad); 
        }
        
        body.remy-theme { 
            --active: var(--remy-main); 
            --active-grad: var(--remy-grad); 
        }

        /* Navigation */
        .app-bar { 
            background: white; 
            padding: 15px 5%; 
            display: flex; 
            justify-content: space-between; 
            align-items: center; 
            position: sticky; 
            top: 0; 
            z-index: 1000; 
            box-shadow: 0 4px 15px rgba(0,0,0,0.05); 
            border-bottom: 4px solid var(--active); 
        }
        
        .btn { 
            padding: 10px 25px; 
            border: none; 
            border-radius: 50px; 
            cursor: pointer; 
            font-weight: bold; 
            font-family: 'Cairo'; 
            transition: 0.3s; 
            color: white; 
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .btn-dahoum { background: var(--dahoum-grad); }
        .btn-remy { background: var(--remy-grad); }
        .btn-admin { background: #455a64; font-size: 0.8rem; }

        .container { 
            max-width: 1200px; 
            margin: 20px auto; 
            padding: 0 20px; 
        }

        /* Hero Card */
        .hero-card { 
            background: var(--active-grad); 
            color: white; 
            border-radius: 35px; 
            padding: 40px; 
            text-align: center; 
            box-shadow: 0 15px 35px rgba(0,0,0,0.1); 
            margin-bottom: 30px; 
            position: relative; 
        }
        
        .profile-wrap { 
            position: relative; 
            width: 140px; 
            height: 140px; 
            margin: 0 auto 20px; 
        }
        
        .profile-img { 
            width: 100%; 
            height: 100%; 
            border-radius: 50%; 
            border: 5px solid white; 
            object-fit: cover; 
        }
        
        .upload-btn { 
            position: absolute; 
            bottom: 0; 
            right: 0; 
            background: white; 
            border-radius: 50%; 
            width: 40px; 
            height: 40px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            cursor: pointer; 
            color: var(--active); 
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            transform: scale(1.1);
        }
        
        .stats-row { 
            display: flex; 
            justify-content: center; 
            gap: 15px; 
            margin-top: 20px; 
            flex-wrap: wrap; 
        }
        
        .stat-item { 
            background: rgba(255,255,255,0.2); 
            backdrop-filter: blur(10px); 
            padding: 10px 25px; 
            border-radius: 20px; 
            min-width: 120px; 
        }
        
        .stat-val { 
            font-size: 1.8rem; 
            font-weight: 900; 
            display: block; 
        }

        /* Badges */
        .badges-row {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .badge {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .badge.earned {
            background: rgba(255,255,255,0.4);
            transform: scale(1.1);
            animation: badgeGlow 2s infinite;
        }

        .badge.locked {
            opacity: 0.3;
            filter: grayscale(100%);
        }

        @keyframes badgeGlow {
            0%, 100% { box-shadow: 0 0 10px rgba(255,255,255,0.5); }
            50% { box-shadow: 0 0 20px rgba(255,255,255,0.8); }
        }

        /* Quiz Section */
        .quiz-container { 
            background: white; 
            border-radius: 30px; 
            padding: 30px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
            margin-bottom: 30px; 
            text-align: center; 
            border: 2px solid var(--active); 
        }
        
        .math-text { 
            font-family: 'Tajawal', sans-serif; 
            font-size: 4rem; 
            font-weight: 800; 
            color: var(--active); 
            margin: 20px 0; 
        }
        
        .math-input { 
            font-size: 2.5rem; 
            width: 160px; 
            text-align: center; 
            border: 3px solid #eee; 
            border-radius: 20px; 
            padding: 10px; 
            font-family: 'Cairo'; 
            transition: all 0.3s ease;
        }

        .math-input:focus {
            outline: none;
            border-color: var(--active);
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        
        .feedback-box { 
            margin-top: 20px; 
            font-weight: bold; 
            font-size: 1.3rem; 
            min-height: 40px; 
            border-radius: 15px; 
            padding: 10px; 
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .correct { 
            background: #d4edda; 
            color: #155724; 
            border: 2px solid #c3e6cb; 
        }
        
        .wrong { 
            background: #f8d7da; 
            color: #721c24; 
            border: 2px solid #f5c6cb; 
        }

        .quiz-completed {
            padding: 40px;
            text-align: center;
        }

        .quiz-completed h2 {
            font-size: 2rem;
            margin-bottom: 20px;
            color: var(--active);
        }

        /* Tables & Cards */
        .section-header { 
            font-size: 1.8rem; 
            color: var(--active); 
            margin: 40px 0 20px; 
            display: flex; 
            align-items: center; 
            gap: 10px; 
        }
        
        .zoom-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); 
            gap: 20px; 
        }
        
        .zoom-card { 
            background: white; 
            padding: 25px; 
            border-radius: 25px; 
            border-right: 8px solid #2d8cff; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.03); 
            transition: all 0.3s ease;
        }

        .zoom-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.08);
        }
        
        .zoom-btn { 
            display: block; 
            background: #2d8cff; 
            color: white; 
            text-decoration: none; 
            text-align: center; 
            padding: 12px; 
            border-radius: 15px; 
            margin-top: 15px; 
            font-weight: bold; 
            transition: all 0.3s ease;
        }

        .zoom-btn:hover {
            background: #1976d2;
            transform: scale(1.05);
        }
        
        .table-wrap { 
            background: white; 
            border-radius: 25px; 
            overflow-x: auto; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.05); 
        }
        
        table { 
            width: 100%; 
            border-collapse: collapse; 
            min-width: 800px; 
        }
        
        th, td { 
            padding: 15px; 
            text-align: center; 
            border: 1px solid #f1f1f1; 
        }
        
        th { 
            background: var(--active); 
            color: white; 
        }
        
        .day-cell { 
            background: #f8fafc; 
            font-weight: 900; 
            color: var(--active); 
        }

        /* Journal */
        .week-picker { 
            display: flex; 
            justify-content: center; 
            gap: 10px; 
            margin-bottom: 20px; 
            flex-wrap: wrap;
        }
        
        .week-btn { 
            padding: 8px 20px; 
            border-radius: 20px; 
            border: 2px solid var(--active); 
            cursor: pointer; 
            font-weight: bold; 
            background: transparent; 
            color: var(--active); 
            font-family: 'Cairo';
            transition: all 0.3s ease;
        }
        
        .week-btn.active { 
            background: var(--active); 
            color: white; 
        }

        .week-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(0,0,0,0.15);
        }
        
        .journal-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr)); 
            gap: 20px; 
        }
        
        .day-card { 
            background: white; 
            padding: 25px; 
            border-radius: 25px; 
            border-top: 8px solid var(--active); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: all 0.3s ease;
        }

        .day-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.1);
        }
        
        textarea { 
            width: 100%; 
            padding: 15px; 
            border-radius: 15px; 
            border: 1px solid #eee; 
            font-family: 'Cairo'; 
            margin-top: 8px; 
            resize: vertical; 
            transition: all 0.3s ease;
            min-height: 80px;
        }

        textarea:focus {
            outline: none;
            border-color: var(--active);
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }

        /* Cloud Status & Admin */
        .sync-toast { 
            position: fixed; 
            bottom: 20px; 
            right: 20px; 
            background: rgba(0,0,0,0.8); 
            color: white; 
            padding: 8px 15px; 
            border-radius: 10px; 
            font-size: 0.8rem; 
            z-index: 2000; 
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateY(20px);
        }

        .sync-toast.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .modal { 
            display: none; 
            position: fixed; 
            top: 0; 
            left: 0; 
            width: 100%; 
            height: 100%; 
            background: rgba(0,0,0,0.6); 
            backdrop-filter: blur(10px); 
            z-index: 2000; 
            align-items: center; 
            justify-content: center; 
        }

        .modal.active {
            display: flex;
        }
        
        .modal-content { 
            background: white; 
            width: 90%; 
            max-width: 500px; 
            padding: 35px; 
            border-radius: 30px; 
            max-height: 85vh;
            overflow-y: auto;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .modal-input { 
            width: 100%; 
            padding: 12px; 
            margin: 10px 0; 
            border-radius: 12px; 
            border: 1px solid #ddd; 
            font-family: 'Cairo'; 
            transition: all 0.3s ease;
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--active);
            box-shadow: 0 0 10px rgba(0,0,0,0.05);
        }
        
        .hidden { display: none; }

        /* Responsive Design */
        @media (max-width: 768px) {
            .math-text { font-size: 2.5rem; }
            .math-input { font-size: 1.8rem; width: 120px; }
            .hero-card { padding: 25px; }
            .profile-wrap { width: 100px; height: 100px; }
            .app-bar { flex-direction: column; gap: 10px; }
            .section-header { font-size: 1.4rem; }
            .container { padding: 0 15px; }
            .zoom-grid, .journal-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) {
            .stats-row { gap: 8px; }
            .stat-item { min-width: 90px; padding: 8px 15px; }
            .stat-val { font-size: 1.4rem; }
        }
    </style>
</head>
<body class="dahoum-theme" id="appBody">

    <div id="syncStatus" class="sync-toast">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø³Ø­Ø§Ø¨... â˜ï¸</div>

    <div class="app-bar">
        <div style="font-weight: 900; font-size: 1.4rem; color: var(--active);">ğŸŒŸ Ù…Ù†ØµØ© Ø§Ù„Ø£Ø¨Ø·Ø§Ù„</div>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <button class="btn btn-dahoum" onclick="switchUser('dahoum')" aria-label="Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø­Ø³Ø§Ø¨ Ø¯Ø­ÙˆÙ…">Ø¯Ø­ÙˆÙ… ğŸ‘¦</button>
            <button class="btn btn-remy" onclick="switchUser('remy')" aria-label="Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ù„Ø­Ø³Ø§Ø¨ Ø±ÙŠÙ…ÙŠ">Ø±ÙŠÙ…ÙŠ ğŸ‘§</button>
            <button class="btn btn-admin" onclick="openAdmin()" aria-label="ÙØªØ­ Ù„ÙˆØ­Ø© Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">âš™ï¸</button>
        </div>
    </div>

    <div class="container">
        <!-- Hero Stats -->
        <div class="hero-card">
            <div class="profile-wrap">
                <img id="uImg" class="profile-img" src="https://via.placeholder.com/150" alt="Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©">
                <label class="upload-btn" onclick="document.getElementById('fileInp').click()" aria-label="ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØ±Ø© Ø§Ù„Ø´Ø®ØµÙŠØ©">ğŸ“·</label>
                <input type="file" id="fileInp" class="hidden" accept="image/*" onchange="uploadImg(event)">
            </div>
            <h1 id="uWelcome">Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø§Ù„Ø¨Ø·Ù„ Ø¯Ø­ÙˆÙ…!</h1>
            <div class="stats-row">
                <div class="stat-item">
                    <span class="stat-val" id="uStars">0</span>
                    <span>Ø§Ù„Ù†Ø¬ÙˆÙ… â­</span>
                </div>
                <div class="stat-item">
                    <span class="stat-val" id="uPts">0</span>
                    <span>Ø§Ù„Ù†Ù‚Ø§Ø· ğŸ¯</span>
                </div>
                <div class="stat-item">
                    <span class="stat-val" id="uLvl">1</span>
                    <span>Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ğŸ†</span>
                </div>
            </div>
            <div class="badges-row" id="badgesArea"></div>
        </div>

        <!-- Math Challenge -->
        <div class="quiz-container">
            <h3 style="color:var(--active); margin-bottom: 15px;">ğŸ§® ØªØ­Ø¯ÙŠ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠ (5 Ø£Ø³Ø¦Ù„Ø©)</h3>
            
            <div id="quizBox">
                <div class="math-text" id="qDisplay">-- Ã— --</div>
                <input 
                    type="number" 
                    id="qInput" 
                    class="math-input" 
                    placeholder="ØŸ" 
                    onkeypress="if(event.key==='Enter') checkMath()"
                    aria-label="Ø£Ø¯Ø®Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©"
                >
                <br><br>
                <button 
                    class="btn" 
                    style="background:var(--active); padding: 15px 50px; font-size: 1.2rem;" 
                    onclick="checkMath()"
                >
                    ØªØ­Ù‚Ù‚ âœ…
                </button>
                <div id="feedback" class="feedback-box hidden"></div>
                <p style="margin-top: 15px; color: #666;">
                    Ø³Ø¤Ø§Ù„ Ø±Ù‚Ù… <span id="qIdx">1</span> Ù…Ù† 5 | 
                    ØµØ­ÙŠØ­Ø©: <span id="correctCount">0</span> âœ… | 
                    Ø®Ø§Ø·Ø¦Ø©: <span id="wrongCount">0</span> âŒ
                </p>
            </div>
            
            <div id="quizResult" class="hidden quiz-completed">
                <h2>ğŸ‰ Ù…Ù…ØªØ§Ø²! Ø£ÙƒÙ…Ù„Øª Ø§Ù„ØªØ­Ø¯ÙŠ!</h2>
                <p style="font-size: 1.5rem; margin: 20px 0;">
                    Ø­ØµÙ„Øª Ø¹Ù„Ù‰ <strong id="earnedPts">0</strong> Ù†Ù‚Ø·Ø©
                </p>
                <p style="color: #666; margin-bottom: 20px;">
                    Ø§Ù„Ù†ØªÙŠØ¬Ø©: <strong id="finalScore">0/5</strong>
                </p>
                <button class="btn" style="background:#444; padding: 12px 35px;" onclick="startQuiz()">
                    ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯ ğŸ”„
                </button>
            </div>

            <div id="quizDone" class="hidden quiz-completed">
                <h2>âœ… Ø£Ø­Ø³Ù†Øª! Ø£ÙƒÙ…Ù„Øª Ø§Ù„ØªØ­Ø¯ÙŠ Ø§Ù„ÙŠÙˆÙ…</h2>
                <p style="font-size: 1.3rem; color: #666; margin: 20px 0;">
                    Ø¹Ø¯ ØºØ¯Ø§Ù‹ Ù„ØªØ­Ø¯ÙŠ Ø¬Ø¯ÙŠØ¯!
                </p>
                <p style="font-size: 1.1rem;">
                    Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„ØªØ­Ø¯ÙŠØ§Øª: <strong id="totalQuizzes">0</strong> ğŸ¯
                </p>
            </div>
        </div>

        <!-- Zoom Classes -->
        <div class="section-header">
            <span>ğŸ“º</span>
            <h2>Ù…ÙˆØ§Ø¹ÙŠØ¯ Ø­ØµØµ Ø§Ù„Ø²ÙˆÙˆÙ…</h2>
        </div>
        <div class="zoom-grid" id="zoomArea"></div>

        <!-- School Schedule -->
        <div class="section-header">
            <span>ğŸ«</span>
            <h2>Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¯Ø±Ø³ÙŠ</h2>
        </div>
        <div class="table-wrap">
            <table>
                <thead>
                    <tr>
                        <th>Ø§Ù„ÙŠÙˆÙ…</th>
                        <th>Ø§Ù„Ø­ØµØ© 1</th>
                        <th>Ø§Ù„Ø­ØµØ© 2</th>
                        <th>Ø§Ù„Ø­ØµØ© 3</th>
                        <th>Ø§Ù„Ø­ØµØ© 4</th>
                        <th>Ø§Ù„Ø­ØµØ© 5</th>
                        <th>Ø§Ù„Ø­ØµØ© 6</th>
                        <th>Ø§Ù„Ø­ØµØ© 7</th>
                    </tr>
                </thead>
                <tbody id="schoolBody"></tbody>
            </table>
        </div>

        <!-- Weekly Journal -->
        <div class="section-header">
            <span>ğŸ““</span>
            <h2>Ù…ÙÙƒØ±Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø² ÙˆØ§Ù„Ù…Ø´Ø§Ø¹Ø±</h2>
        </div>
        <div class="week-picker">
            <button class="week-btn active" onclick="changeWeek(1)">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1</button>
            <button class="week-btn" onclick="changeWeek(2)">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 2</button>
            <button class="week-btn" onclick="changeWeek(3)">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 3</button>
            <button class="week-btn" onclick="changeWeek(4)">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 4</button>
        </div>
        <div class="journal-grid" id="journalArea"></div>
    </div>

    <!-- Admin Modal -->
    <div id="adminModal" class="modal">
        <div class="modal-content">
            <h3 style="text-align: center; color: var(--active); margin-bottom: 20px;">âš™ï¸ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…</h3>
            
            <h4 style="margin: 20px 0 10px 0;">ğŸŒŸ Ø¥Ø¶Ø§ÙØ© Ù†Ø¬ÙˆÙ…</h4>
            <div style="display: flex; gap: 10px;">
                <button class="btn btn-dahoum" style="flex: 1;" onclick="addReward('dahoum')">Ø¯Ø­ÙˆÙ… +1 â­</button>
                <button class="btn btn-remy" style="flex: 1;" onclick="addReward('remy')">Ø±ÙŠÙ…ÙŠ +1 â­</button>
            </div>

            <h4 style="margin: 20px 0 10px 0;">â˜ï¸ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª GitHub</h4>
            <p style="font-size: 0.85rem; color: #666; margin-bottom: 10px;">
                Ø³ÙŠØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ database.json
            </p>
            <input 
                type="password" 
                id="ghToken" 
                class="modal-input" 
                placeholder="GitHub Token"
                aria-label="GitHub Token"
            >
            <input 
                type="text" 
                id="ghRepo" 
                class="modal-input" 
                placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ (username/repo)"
                aria-label="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹"
            >
            
            <button 
                class="btn" 
                style="background: var(--success); color: white; width: 100%; margin-top: 15px; padding: 12px;" 
                onclick="saveAdmin()"
            >
                Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª ÙˆÙ…Ø²Ø§Ù…Ù†Ø© ğŸš€
            </button>
            <button 
                class="btn" 
                style="background: #eee; color: #333; width: 100%; margin-top: 10px; padding: 12px;" 
                onclick="closeAdmin()"
            >
                Ø¥ØºÙ„Ø§Ù‚ âœ–ï¸
            </button>
        </div>
    </div>

<script>
    'use strict';

    // Constants
    const DAYS = ["Ø§Ù„Ø£Ø­Ø¯", "Ø§Ù„Ø§Ø«Ù†ÙŠÙ†", "Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡", "Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡", "Ø§Ù„Ø®Ù…ÙŠØ³"];
    const BADGES = [
        { emoji: 'ğŸŒŸ', name: '10 Ù†Ø¬ÙˆÙ…', req: 10, type: 'stars' },
        { emoji: 'â­', name: '25 Ù†Ø¬Ù…Ø©', req: 25, type: 'stars' },
        { emoji: 'ğŸ†', name: '50 Ù†Ø¬Ù…Ø©', req: 50, type: 'stars' },
        { emoji: 'ğŸ¯', name: '100 Ù†Ù‚Ø·Ø©', req: 100, type: 'pts' },
        { emoji: 'ğŸ–ï¸', name: '500 Ù†Ù‚Ø·Ø©', req: 500, type: 'pts' },
        { emoji: 'ğŸ§®', name: '10 ØªØ­Ø¯ÙŠØ§Øª', req: 10, type: 'quizzes' }
    ];

    const CONFIG = {
        dahoum: {
            theme: "dahoum-theme",
            welcome: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø§Ù„Ø¨Ø·Ù„ Ø¯Ø­ÙˆÙ…!",
            zoom: [
                { t: "Ù‚Ø±Ø¢Ù† (Ø£. Ù‡Ø§Ø¬Ø±)", d: "Ø£Ø­Ø¯ØŒ Ø§Ø«Ù†ÙŠÙ†ØŒ Ø£Ø±Ø¨Ø¹Ø§Ø¡", h: "2:30 Ø¸", l: "https://us05web.zoom.us/j/5552102339?pwd=7fPtK8N4zIBbY8fvreFOdeqxmP4AJL.1" },
                { t: "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ (Ø£. Ù…Ù†Ø§Ø±)", d: "Ø£Ø­Ø¯ØŒ Ø«Ù„Ø§Ø«Ø§Ø¡", h: "6:00 Ù…", l: "https://us05web.zoom.us/j/89914760138?pwd=GH8Uoy2ew11eBgj3YUYLTSjzUCwb9j.1" }
            ],
            school: [
                ["Ù‚Ø±Ø¢Ù†", "Ø¨Ø¯Ù†ÙŠØ©", "Ø­ÙŠØ§ØªÙŠØ©", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¹Ù„ÙˆÙ…", "ÙÙ†ÙŠØ©", "Ø¹Ø±Ø¨ÙŠ"],
                ["Ø¹Ù„ÙˆÙ…", "Ø¨Ø¯Ù†ÙŠØ©", "Ù‚Ø±Ø¢Ù†", "Ø¹Ø±Ø¨ÙŠ", "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¹Ø±Ø¨ÙŠ"],
                ["Ø¹Ù„ÙˆÙ…", "Ø¨Ø¯Ù†ÙŠØ©", "Ù‚Ø±Ø¢Ù†", "Ø¹Ø±Ø¨ÙŠ", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ù†Ø´Ø§Ø·", "-"],
                ["Ù‚Ø±Ø¢Ù†", "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¹Ø±Ø¨ÙŠ", "Ø¹Ù„ÙˆÙ…", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "-"],
                ["Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", "Ø¹Ø±Ø¨ÙŠ", "Ù‚Ø±Ø¢Ù†", "ÙÙ†ÙŠØ©", "Ù†Ø´Ø§Ø·", "-"]
            ]
        },
        remy: {
            theme: "remy-theme",
            welcome: "Ø£Ù‡Ù„Ø§Ù‹ Ø¨Ø§Ù„Ù…Ø¨Ø¯Ø¹Ø© Ø±ÙŠÙ…ÙŠ!",
            zoom: [
                { t: "Ù‚Ø±Ø¢Ù† (Ø£. Ù…Ù†Ù‡)", d: "Ø£Ø­Ø¯ØŒ Ø«Ù„Ø§Ø«Ø§Ø¡ØŒ Ø£Ø±Ø¨Ø¹Ø§Ø¡", h: "2:00 Ø¸", l: "https://us05web.zoom.us/j/4365062686?pwd=gzEitR0Y0KKyh5xukgAZwrqNXdibWx.1" },
                { t: "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ (Ø£. Ù…Ù†Ø§Ø±)", d: "Ø£Ø­Ø¯ØŒ Ø«Ù„Ø§Ø«Ø§Ø¡", h: "6:00 Ù…", l: "https://us05web.zoom.us/j/89914760138?pwd=GH8Uoy2ew11eBgj3YUYLTSjzUCwb9j.1" }
            ],
            school: [
                ["Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "Ù„ØºØªÙŠ", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", "Ù„ØºØªÙŠ", "Ø¨Ø¯Ù†ÙŠØ©", "Ù†Ø´Ø§Ø· 3"],
                ["Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ù„ØºØªÙŠ", "Ø­ÙŠØ§ØªÙŠØ©", "Ù†Ø´Ø§Ø· 3", "Ø¨Ø¯Ù†ÙŠØ©", "Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "Ø¹Ù„ÙˆÙ…"],
                ["Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", "Ù„ØºØªÙŠ", "Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "Ù†Ø´Ø§Ø· 3", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "ÙÙ†ÙŠØ©", "ÙÙ†ÙŠØ©"],
                ["Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¹Ù„ÙˆÙ…", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¹Ù„ÙˆÙ…", "Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "Ù„ØºØªÙŠ", "-"],
                ["Ù„ØºØªÙŠ", "Ø±ÙŠØ§Ø¶ÙŠØ§Øª", "Ø¥Ø³Ù„Ø§Ù…ÙŠØ©", "Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠ", "Ø¨Ø¯Ù†ÙŠØ©", "Ø¹Ù„ÙˆÙ…", "-"]
            ]
        }
    };

    // State Variables
    let currentUser = 'dahoum';
    let currentWeek = 1;
    let qIdx = 1;
    let currentAns = 0;
    let currentScore = 0;
    let correctAnswers = 0;
    let wrongAnswers = 0;
    let syncTimer = null;

    // =================================
    // Cloud Sync Functions
    // =================================
    
    /**
     * Initialize app and fetch data from cloud
     */
    window.onload = async () => {
        const token = localStorage.getItem('gh_token');
        const repo = localStorage.getItem('gh_repo');
        
        if (token && repo) {
            await fetchFromCloud(token, repo);
        }
        
        switchUser('dahoum');
    };

    /**
     * Fetch data from GitHub repository
     */
    async function fetchFromCloud(token, repo) {
        showStatus("Ø¬Ø§Ø±ÙŠ Ù…Ø²Ø§Ù…Ù†Ø© Ø¨ÙŠØ§Ù†Ø§ØªÙƒ... ğŸ”„");
        const url = `https://api.github.com/repos/${repo}/contents/database.json`;
        
        try {
            const res = await fetch(url, {
                headers: { 'Authorization': `token ${token}` }
            });
            
            if (res.ok) {
                const json = await res.json();
                const data = JSON.parse(decodeURIComponent(escape(atob(json.content))));
                
                Object.keys(data).forEach(k => {
                    localStorage.setItem(k, data[k]);
                });
                
                showStatus("ØªÙ… ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ù†Ø¬Ø§Ø­ âœ…", 3000);
            } else {
                throw new Error('ÙØ´Ù„ ÙÙŠ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª');
            }
        } catch (error) {
            console.error('Cloud sync error:', error);
            showStatus("ÙØ´Ù„Øª Ø§Ù„Ù…Ø²Ø§Ù…Ù†Ø© âŒ", 3000);
        }
    }

    /**
     * Push data to GitHub repository
     */
    async function pushToCloud() {
        const token = localStorage.getItem('gh_token');
        const repo = localStorage.getItem('gh_repo');
        
        if (!token || !repo) return;
        
        showStatus("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø­ÙØ¸ ÙÙŠ Ø§Ù„Ø³Ø­Ø§Ø¨... â˜ï¸");
        
        // Collect all data except GitHub credentials
        const data = {};
        for (let i = 0; i < localStorage.length; i++) {
            const key = localStorage.key(i);
            if (!key.startsWith('gh_')) {
                data[key] = localStorage.getItem(key);
            }
        }
        
        const url = `https://api.github.com/repos/${repo}/contents/database.json`;
        
        try {
            // Get current file SHA
            let sha = "";
            try {
                const res = await fetch(url, {
                    headers: { 'Authorization': `token ${token}` }
                });
                
                if (res.ok) {
                    const json = await res.json();
                    sha = json.sha;
                }
            } catch (e) {
                // File doesn't exist yet, that's okay
            }
            
            // Upload new data
            const putRes = await fetch(url, {
                method: 'PUT',
                headers: {
                    'Authorization': `token ${token}`,
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    message: `ØªØ­Ø¯ÙŠØ« ØªÙ„Ù‚Ø§Ø¦ÙŠ - ${new Date().toLocaleString('ar-SA')}`,
                    content: btoa(unescape(encodeURIComponent(JSON.stringify(data, null, 2)))),
                    sha: sha
                })
            });
            
            if (putRes.ok) {
                showStatus("ØªÙ… Ø§Ù„Ø­ÙØ¸ Ø³Ø­Ø§Ø¨ÙŠØ§Ù‹ âœ…", 2000);
            } else {
                const error = await putRes.json();
                throw new Error(error.message || 'Ø®Ø·Ø£ ØºÙŠØ± Ù…Ø¹Ø±ÙˆÙ');
            }
        } catch (error) {
            console.error('Push error:', error);
            showStatus("Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø­ÙØ¸ âŒ", 3000);
        }
    }

    /**
     * Show status message with auto-hide
     */
    function showStatus(message, duration = 0) {
        const toast = document.getElementById('syncStatus');
        toast.innerText = message;
        toast.classList.add('show');
        
        if (duration > 0) {
            setTimeout(() => {
                toast.classList.remove('show');
            }, duration);
        }
    }

    // =================================
    // User Interface Functions
    // =================================
    
    /**
     * Switch between users (Dahoum/Remy)
     */
    function switchUser(u) {
        currentUser = u;
        
        // Update theme
        document.getElementById('appBody').className = CONFIG[u].theme;
        
        // Update welcome message
        document.getElementById('uWelcome').innerText = CONFIG[u].welcome;
        
        // Update stats
        updateStats();
        
        // Update profile image
        const savedImg = localStorage.getItem(u + '_img');
        document.getElementById('uImg').src = savedImg || 'https://via.placeholder.com/150';
        
        // Render components
        renderBadges();
        renderZoom();
        renderSchool();
        renderJournal();
        checkQuizStatus();
    }

    /**
     * Update user statistics display
     */
    function updateStats() {
        const stars = parseInt(localStorage.getItem(currentUser + '_stars') || 0);
        const pts = parseInt(localStorage.getItem(currentUser + '_pts') || 0);
        const lvl = Math.floor(pts / 100) + 1;
        
        document.getElementById('uStars').innerText = stars;
        document.getElementById('uPts').innerText = pts;
        document.getElementById('uLvl').innerText = lvl;
    }

    /**
     * Render badges based on achievements
     */
    function renderBadges() {
        const stars = parseInt(localStorage.getItem(currentUser + '_stars') || 0);
        const pts = parseInt(localStorage.getItem(currentUser + '_pts') || 0);
        const quizzes = parseInt(localStorage.getItem(currentUser + '_quizzes') || 0);
        
        const stats = { stars, pts, quizzes };
        
        const html = BADGES.map(badge => {
            const earned = stats[badge.type] >= badge.req;
            return `
                <div class="badge ${earned ? 'earned' : 'locked'}" title="${badge.name}">
                    ${badge.emoji}
                </div>
            `;
        }).join('');
        
        document.getElementById('badgesArea').innerHTML = html;
    }

    /**
     * Render Zoom classes
     */
    function renderZoom() {
        const html = CONFIG[currentUser].zoom.map(z => `
            <div class="zoom-card">
                <strong>${z.t}</strong><br>
                <small>ğŸ“… ${z.d}</small><br>
                <small>â° ${z.h}</small>
                <a href="${z.l}" target="_blank" class="zoom-btn">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ø­ØµØ© ğŸ–¥ï¸</a>
            </div>
        `).join('');
        
        document.getElementById('zoomArea').innerHTML = html;
    }

    /**
     * Render school schedule
     */
    function renderSchool() {
        const html = DAYS.map((d, i) => `
            <tr>
                <td class="day-cell">${d}</td>
                ${CONFIG[currentUser].school[i].map(c => `<td>${c}</td>`).join('')}
            </tr>
        `).join('');
        
        document.getElementById('schoolBody').innerHTML = html;
    }

    /**
     * Change week and update display
     */
    function changeWeek(w) {
        currentWeek = w;
        
        // Update button states
        document.querySelectorAll('.week-btn').forEach((b, i) => {
            b.classList.toggle('active', i + 1 === w);
        });
        
        renderJournal();
    }

    /**
     * Render weekly journal
     */
    function renderJournal() {
        const html = DAYS.map(d => {
            const key = `${currentUser}_w${currentWeek}_${d}`;
            const data = JSON.parse(localStorage.getItem(key) || '{"hw":"","h1":"","h2":"","sad":""}');
            
            return `
                <div class="day-card">
                    <h3>ğŸ“… ${d}</h3>
                    <label>ğŸ“ Ø§Ù„ÙˆØ§Ø¬Ø¨Ø§Øª:</label>
                    <textarea 
                        onchange="saveNote('${key}','hw',this.value)" 
                        placeholder="Ø§ÙƒØªØ¨ ÙˆØ§Ø¬Ø¨Ø§ØªÙƒ Ù‡Ù†Ø§..."
                        aria-label="ÙˆØ§Ø¬Ø¨Ø§Øª ÙŠÙˆÙ… ${d}"
                    >${data.hw}</textarea>
                    
                    <div class="happy-box">
                        <label>ğŸ˜Š Ø£Ø´ÙŠØ§Ø¡ Ø³Ø¹ÙŠØ¯Ø©:</label>
                        <textarea 
                            onchange="saveNote('${key}','h1',this.value)" 
                            placeholder="Ø­Ø¯Ø« Ø³Ø¹ÙŠØ¯ 1"
                            aria-label="Ø­Ø¯Ø« Ø³Ø¹ÙŠØ¯ 1 ÙŠÙˆÙ… ${d}"
                        >${data.h1}</textarea>
                        <textarea 
                            onchange="saveNote('${key}','h2',this.value)" 
                            placeholder="Ø­Ø¯Ø« Ø³Ø¹ÙŠØ¯ 2"
                            aria-label="Ø­Ø¯Ø« Ø³Ø¹ÙŠØ¯ 2 ÙŠÙˆÙ… ${d}"
                        >${data.h2}</textarea>
                    </div>
                    
                    <div class="sad-box">
                        <label>ğŸ˜” Ø´ÙŠØ¡ Ø£Ø²Ø¹Ø¬Ù†ÙŠ:</label>
                        <textarea 
                            onchange="saveNote('${key}','sad',this.value)" 
                            placeholder="Ø§ÙƒØªØ¨ Ù…Ø§ Ø£Ø²Ø¹Ø¬Ùƒ..."
                            aria-label="Ø´ÙŠØ¡ Ù…Ø­Ø²Ù† ÙŠÙˆÙ… ${d}"
                        >${data.sad}</textarea>
                    </div>
                </div>
            `;
        }).join('');
        
        document.getElementById('journalArea').innerHTML = html;
    }

    /**
     * Save journal note with debounced cloud sync
     */
    function saveNote(k, f, v) {
        const data = JSON.parse(localStorage.getItem(k) || '{}');
        data[f] = v;
        localStorage.setItem(k, JSON.stringify(data));
        
        // Debounced sync
        if (syncTimer) clearTimeout(syncTimer);
        syncTimer = setTimeout(() => pushToCloud(), 2000);
    }

    // =================================
    // Math Quiz Functions
    // =================================
    
    /**
     * Check if quiz was completed today
     */
    function checkQuizStatus() {
        const today = new Date().toDateString();
        const lastQuiz = localStorage.getItem(currentUser + '_lastQuiz');
        const quizzes = parseInt(localStorage.getItem(currentUser + '_quizzes') || 0);
        
        if (lastQuiz === today) {
            // Quiz already completed today
            document.getElementById('quizBox').classList.add('hidden');
            document.getElementById('quizResult').classList.add('hidden');
            document.getElementById('quizDone').classList.remove('hidden');
            document.getElementById('totalQuizzes').innerText = quizzes;
        } else {
            // Start new quiz
            document.getElementById('quizDone').classList.add('hidden');
            startQuiz();
        }
    }

    /**
     * Start a new quiz
     */
    function startQuiz() {
        qIdx = 1;
        currentScore = 0;
        correctAnswers = 0;
        wrongAnswers = 0;
        
        document.getElementById('quizBox').classList.remove('hidden');
        document.getElementById('quizResult').classList.add('hidden');
        document.getElementById('quizDone').classList.add('hidden');
        
        updateQuizCounters();
        genQ();
    }

    /**
     * Generate a new question (multiplication or division, 1-10)
     */
    function genQ() {
        const isDiv = Math.random() > 0.5;
        
        if (isDiv) {
            // Division: Generate result first, then multiply to get dividend
            const divisor = Math.floor(Math.random() * 10) + 1; // 1-10
            const result = Math.floor(Math.random() * 10) + 1;  // 1-10
            const dividend = result * divisor;
            
            document.getElementById('qDisplay').innerText = `${dividend} Ã· ${divisor}`;
            currentAns = result;
        } else {
            // Multiplication: 1-10 Ã— 1-10
            const num1 = Math.floor(Math.random() * 10) + 1;
            const num2 = Math.floor(Math.random() * 10) + 1;
            
            document.getElementById('qDisplay').innerText = `${num1} Ã— ${num2}`;
            currentAns = num1 * num2;
        }
        
        document.getElementById('qIdx').innerText = qIdx;
        document.getElementById('qInput').value = '';
        document.getElementById('qInput').focus();
        document.getElementById('feedback').classList.add('hidden');
    }

    /**
     * Check user's answer
     */
    function checkMath() {
        const val = parseInt(document.getElementById('qInput').value);
        const fb = document.getElementById('feedback');
        
        if (isNaN(val)) {
            fb.innerText = "âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø±Ù‚Ù…!";
            fb.className = "feedback-box wrong";
            fb.classList.remove('hidden');
            return;
        }
        
        fb.classList.remove('hidden');
        
        if (val === currentAns) {
            correctAnswers++;
            currentScore += 20; // 20 points per correct answer
            fb.innerText = "ğŸ‰ ØµØ­! Ø¨Ø·Ù„ +20 Ù†Ù‚Ø·Ø©";
            fb.className = "feedback-box correct";
        } else {
            wrongAnswers++;
            fb.innerHTML = `âŒ Ø®Ø·Ø£! Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‡ÙŠ: <b>${currentAns}</b>`;
            fb.className = "feedback-box wrong";
        }
        
        updateQuizCounters();
        
        setTimeout(() => {
            if (qIdx < 5) {
                qIdx++;
                genQ();
            } else {
                finishQuiz();
            }
        }, 2000);
    }

    /**
     * Update quiz counters display
     */
    function updateQuizCounters() {
        document.getElementById('correctCount').innerText = correctAnswers;
        document.getElementById('wrongCount').innerText = wrongAnswers;
    }

    /**
     * Finish quiz and save results
     */
    function finishQuiz() {
        // Hide quiz box
        document.getElementById('quizBox').classList.add('hidden');
        
        // Show results
        document.getElementById('quizResult').classList.remove('hidden');
        document.getElementById('earnedPts').innerText = currentScore;
        document.getElementById('finalScore').innerText = `${correctAnswers}/5`;
        
        // Update points
        const currentPts = parseInt(localStorage.getItem(currentUser + '_pts') || 0);
        const newPts = currentPts + currentScore;
        localStorage.setItem(currentUser + '_pts', newPts);
        
        // Update quiz count
        const currentQuizzes = parseInt(localStorage.getItem(currentUser + '_quizzes') || 0);
        localStorage.setItem(currentUser + '_quizzes', currentQuizzes + 1);
        
        // Save completion date
        const today = new Date().toDateString();
        localStorage.setItem(currentUser + '_lastQuiz', today);
        
        // Update display
        updateStats();
        renderBadges();
        
        // Sync to cloud
        pushToCloud();
    }

    // =================================
    // Image Upload Function
    // =================================
    
    /**
     * Upload and validate profile image
     */
    function uploadImg(e) {
        const file = e.target.files[0];
        
        if (!file) return;
        
        // Validate file type
        if (!file.type.startsWith('image/')) {
            alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© ÙÙ‚Ø· (JPG, PNG, GIF)');
            return;
        }
        
        // Validate file size (max 5MB)
        if (file.size > 5 * 1024 * 1024) {
            alert('âš ï¸ Ø­Ø¬Ù… Ø§Ù„ØµÙˆØ±Ø© ÙƒØ¨ÙŠØ± Ø¬Ø¯Ø§Ù‹! Ø§Ù„Ø­Ø¯ Ø§Ù„Ø£Ù‚ØµÙ‰ 5 Ù…ÙŠØ¬Ø§Ø¨Ø§ÙŠØª');
            return;
        }
        
        const reader = new FileReader();
        
        reader.onload = (event) => {
            const img = event.target.result;
            document.getElementById('uImg').src = img;
            localStorage.setItem(currentUser + '_img', img);
            pushToCloud();
        };
        
        reader.onerror = () => {
            alert('âŒ Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØµÙˆØ±Ø©');
        };
        
        reader.readAsDataURL(file);
    }

    // =================================
    // Admin Functions
    // =================================
    
    /**
     * Open admin modal with password protection
     */
    function openAdmin() {
        // Note: This is a simple protection. For production, use proper authentication
        const password = prompt("ğŸ” Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø³Ø±ÙŠ:");
        
        if (password === null) return; // User cancelled
        
        if (password === "123456") {
            document.getElementById('adminModal').classList.add('active');
            
            // Load saved credentials (if any)
            document.getElementById('ghToken').value = localStorage.getItem('gh_token') || '';
            document.getElementById('ghRepo').value = localStorage.getItem('gh_repo') || '';
        } else {
            alert("âŒ Ø±Ù‚Ù… Ø³Ø±ÙŠ Ø®Ø§Ø·Ø¦!");
        }
    }

    /**
     * Close admin modal
     */
    function closeAdmin() {
        document.getElementById('adminModal').classList.remove('active');
    }

    /**
     * Add reward (star) to user
     */
    function addReward(u) {
        const currentStars = parseInt(localStorage.getItem(u + '_stars') || 0);
        const newStars = currentStars + 1;
        
        localStorage.setItem(u + '_stars', newStars);
        
        if (u === currentUser) {
            updateStats();
            renderBadges();
        }
        
        pushToCloud();
        alert(`âœ… ØªÙ…Øª Ø¥Ø¶Ø§ÙØ© Ù†Ø¬Ù…Ø© Ù„Ù€ ${u === 'dahoum' ? 'Ø¯Ø­ÙˆÙ…' : 'Ø±ÙŠÙ…ÙŠ'}!`);
    }

    /**
     * Save admin settings and sync
     */
    function saveAdmin() {
        const token = document.getElementById('ghToken').value.trim();
        const repo = document.getElementById('ghRepo').value.trim();
        
        if (!token || !repo) {
            alert('âš ï¸ Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª!');
            return;
        }
        
        // Validate repo format (should be username/repo)
        if (!repo.includes('/')) {
            alert('âš ï¸ ØµÙŠØºØ© Ø§Ù„Ù…Ø³ØªÙˆØ¯Ø¹ ØºÙŠØ± ØµØ­ÙŠØ­Ø©! ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ†: username/repo');
            return;
        }
        
        localStorage.setItem('gh_token', token);
        localStorage.setItem('gh_repo', repo);
        
        pushToCloud();
        closeAdmin();
        
        alert('âœ… ØªÙ… Ø­ÙØ¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¨Ù†Ø¬Ø§Ø­!');
    }

    // Close modal on outside click
    document.getElementById('adminModal').addEventListener('click', function(e) {
        if (e.target === this) {
            closeAdmin();
        }
    });
</script>

</body>
</html>
